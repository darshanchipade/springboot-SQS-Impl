# Server Port
server.port=8080
server.address=0.0.0.0

# Path to the context configuration file
app.context.config.path=classpath:context-config.json

# Local JSON File Path (relative to src/main/resources)
app.json.file.path=data/internal-425-Test-1-US.json

# Enable Spring Retry
spring.retry.enabled=true

## AWS CONFIG
#aws.region=us-east-1
#aws.bedrock.modelId=arn:aws:bedrock:us-east-1:152914900543:inference-profile/us.anthropic.claude-opus-4-20250514-v1:0
#aws.bedrock.modelId=anthropic.claude-3-5-sonnet-20240620-v1:0
aws.bedrock.modelId=us.anthropic.claude-3-haiku-20240307-v1:0
aws.bedrock.embeddingModelId=amazon.titan-embed-text-v2:0
app.bedrock.processing.delayMs=15000
app.s3.bucket-name=darshans3bucket-1
app.s3.region=us-east-2
app.embedding.model=sentence-transformers/all-MiniLM-L6-v2
#spring.graphql.path=/graphql
#spring.graphql.graphiql.enabled=true
#spring.graphql.graphiql.path=/graphiql
#spring.graphql.graphiql.cdn.enabled=true


# Logging Level (optional, for debugging)
logging.level.com.apple.springboot=DEBUG
logging.level.org.springframework.retry=DEBUG
logging.level.org.springdoc=DEBUG

# PostgreSQL Database Configuration
#spring.datasource.url=jdbc:postgresql://localhost:5432/bedrock_enriched_content_db
#spring.datasource.username=postgres
#spring.datasource.password=admin
#spring.datasource.driver-class-name=org.postgresql.Driver


#spring.datasource.url=jdbc:postgresql://localhost:5433/bedrock_enriched_content_db?tcpKeepAlive=true&connectTimeout=10&socketTimeout=60
#spring.datasource.username=yugabyte
#spring.datasource.password=yugabyte
#spring.batch.jdbc.platform=postgres
#spring.batch.jdbc.initialize-schema=NEVER
## The YugabyteDB smart driver is recommended. It's aware of the cluster topology.
spring.datasource.url=jdbc:postgresql://us-east-1.87570475-5fdd-4a0e-9a8f-b12e92b791c8.aws.yugabyte.cloud:5433/bedrock_enriched_content_db?sslmode=require&sslrootcert=/Users/darshanchipade/Documents/GitHub/springboot-SQS-Impl/src/main/resources/certs/root.crt
spring.datasource.username=admin
spring.datasource.password=L7OIjJInEw94bcCxklWPY3SOQXiTdt
#spring.datasource.username=admin
#spring.datasource.password=L7OIjJInEw94bcCxklWPY3SOQXiTdt
spring.datasource.driver-class-name=org.postgresql.Driver


spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.keepalive-time=120000
spring.jpa.properties.hibernate.order_inserts=true
spring.datasource.hikari.auto-commit=true


# Optional while diagnosing
# spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate Configuration
# 'update' can automatically create/update schema based on entities. Good for dev, use 'validate' or 'none' in prod.
spring.jpa.hibernate.ddl-auto=update
#spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.type.json_mapper=com.fasterxml.jackson.databind.ObjectMapper


# Replace 'bedrockEnricher' with the name you'll use in your @RateLimiter annotation.
resilience4j.ratelimiter.instances.bedrockEnricher.limitForPeriod=1
resilience4j.ratelimiter.instances.bedrockEnricher.limitRefreshPeriod=2s
resilience4j.ratelimiter.instances.bedrockEnricher.timeoutDuration=10s

#SQS
#old quue with us-east-1 resgion
#aws.sqs.queue.url=https://sqs.us-east-1.amazonaws.com/152914900543/enrichment-queue
aws.sqs.queue.url=https://sqs.us-east-2.amazonaws.com/152914900543/enrichment-queue


# SQS listener tuning
aws.sqs.listener.batch-size=8

# Batch processing configuration
spring.batch.job.enabled=false

# Actuator configuration
management.endpoints.web.exposure.include=health,info,prometheus,metrics,ratelimiter
management.endpoint.health.show-details=always
aws.bedrock.rateLimit=10.0
app.ratelimit.chatQps=0.5
app.ratelimit.embedQps=8.0
app.embedding.worker.enabled=true
app.embedding.worker.batch-size=25
app.embedding.worker.poll-delay-ms=500
app.bedrock.maxTokens=384
app.enrichment.max-concurrent-messages=2


# Change detection tuning
# When true, usagePath must match for change detection; when false, we fallback to (sourcePath,itemType)
app.ingestion.strict-usage-path=false
app.ingestion.consider-context-change=false
app.ingestion.return-all-items=false
app.ai.prompt.path=classpath:prompts/interactive_search_prompt.txt

# SpringDoc OpenAPI (Swagger) Configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

app.ingestion.excluded-item-types=analytics,disclaimers,pageAnalyticsAttributes,alt,analyticsAttributes,url,analyticsTags

spring.jpa.properties.hibernate.connection.isolation=2



